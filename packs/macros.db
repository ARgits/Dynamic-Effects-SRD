{"_id":"DHETVvB5IFP8hqaf","name":"SpellRemoval","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let SpellOff = game.macros.getName(\"SpellOff\");\r\nasync function choose(options = [], prompt = ``) {\r\n    let value = await new Promise((resolve, reject) => {\r\n\r\n        let dialog_options = (options[0] instanceof Array)\r\n            ? options.map(o => `<option value=\"${o[0]}\">${o[1]}</option>`).join(``)\r\n            : options.map(o => `<option value=\"${o}\">${o}</option>`).join(``);\r\n\r\n        let content = `${prompt}<br><select id=\"choice\">${dialog_options}</select>`;\r\n\r\n        new Dialog({\r\n            content,\r\n            buttons: { OK: { label: `OK`, callback: async (html) => { resolve(html.find('#choice').val()); } } }\r\n        }).render(true);\r\n    });\r\n    return value;\r\n}\r\n\r\n(async () => {\r\n    let choice = await choose(Object.keys(actor.data.flags.world), `Choose something : `);\r\n    if (choice === \"barkskin\") {\r\n        SpellOff.execute(\"Barkskin\")\r\n    }\r\n    if (choice === \"DE Blinded\" || \"DE Deafened\") {\r\n        SpellOff.execute(\"BlindDeaf\")\r\n    } \r\n    if (choice === \"darkvisionSpell\") {\r\n        SpellOff.execute(\"Darkvision\")\r\n    } \r\n     if (choice === \"enlageReduceSpell\") {\r\n        SpellOff.execute(\"EnlargeReduce\")\r\n    } \r\n     if (choice === \"heroismUpdateCombatHookId\") {\r\n        SpellOff.execute(\"Heroism\")\r\n    } \r\n     if (choice === \"Longstrider\") {\r\n        SpellOff.execute(\"Longstrider\")\r\n    } \r\n     if (choice === \"rayOfFrost\") {\r\n        SpellOff.execute(\"Ray of Frost\")\r\n    } \r\n     if (choice === \"shillelagh\") {\r\n        SpellOff.execute(\"Shillelagh\")\r\n    }\r\n})();","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"Aid","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro ","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nif (!target) {\r\n  ChatMessage.create({content: `Token ${args[1]} is no longer in scene`, whisper: ChatMessage.getWhisperIDs(\"GM\")})\r\n  return;\r\n}\r\n\r\nlet increment = 5 * (args[2] - 1);\r\nif (!args[2]) increment = 5;\r\nlet hpMax = target.actor.data.data.attributes.hp.max;\r\nlet hp = target.actor.data.data.attributes.hp.value;\r\n\r\nif (args[0] === \"on\") {\r\n  target.actor.update({\"data.attributes.hp.max\": hpMax + increment, \"data.attributes.hp.value\": hp + increment})\r\nChatMessage.create({content: `Aid Spell: ${target.name} received ${increment} HP`})\r\n} else {\r\n  target.actor.update({\"data.attributes.hp.max\": hpMax - increment, \"data.attributes.hp.value\": Math.min(hp, hpMax - increment)})\r\nChatMessage.create({content: `Aid Spell Expiry: ${target.name} Max HP reduced by ${increment}`})\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"EQUckCxqTELGBy6O"}
{"_id":"LnYog6K6tzzjiyZh","name":"Longstrider","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\nlet TokenSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet TokenUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet speed = parseInt(target.actor.data.data.attributes.speed.value);\r\n\r\nif (args[0] === \"on\" && !target.actor.getFlag('world', 'Longstrider')) {\r\n    let newSpeed = (speed + 10) + \"ft\";\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\": newSpeed });\r\n    TokenSetFlag.execute(args[1], 'world', 'Longstrider', speed);\r\n    ChatMessage.create({ content: target.name + \" has their speed increased by 10ft\" })\r\n} else if (args[0] === \"off\" ) {\r\n    let newSpeed = target.actor.getFlag('world', 'Longstrider')\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\": (newSpeed + \"ft\") });\r\n    TokenUnSetFlag.execute(args[1], 'world', 'Longstrider');\r\n    ChatMessage.create({ content: target.name + \" has their speed returned to normal\" })\r\n}\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"VBS7PaUrJBKskVmg","name":"Boots of Striding","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\nlet TokenSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet TokenUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet speed = parseInt(target.actor.data.data.attributes.speed.value);\r\n\r\nif (!target.getFlag('world', 'bootsOfStriding')) {\r\n    let newSpeed = (speed < 30) ? 30 : speed;\r\n    console.log(newSpeed)\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\": (newSpeed + \"ft\") });\r\n    ActorSetFlag.execute(args[1], 'world', 'bootsOfStriding', speed);\r\n} else if (target.getFlag('world', 'bootsOfStriding')) {\r\n    let newSpeed = target.getFlag('world', 'bootsOfStriding')\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\": (newSpeed + \"ft\") });\r\n    TActorUnSetFlag.execute(args[1], 'world', 'bootsOfStriding');\r\n}\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"eGyYBuXGQaRjoPgJ","name":"BlindExecute","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\n\r\n\r\nif (args[2] === 1){\r\n    game.cub.applyCondition(args[0], target)\r\n    let flag = \"DE \" + args[0]\r\n    ActorSetFlag.execute(args[1], 'world', flag, 1)\r\n    ChatMessage.Create({content: target.name + \" has been \" + args[0]})\r\n} else {\r\n    if(args[2] === 2){\r\n        let flag = \"DE \" + args[0]\r\n        game.cub.removeCondition(args[0], target);\r\n        ChatMessage.Create({content: target.name + \" is no longer \" + args[0]})\r\n        ActorUnSetFlag.execute(args[1], 'world', flag)\r\n    }\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"CUB condition control","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nif (args[2] === 1){\r\n    game.cub.applyCondition(args[0], target)\r\n    let flag = \"DE \" + args[0]\r\n    target.setFlag('world', flag, 1)\r\n} else {\r\n    if(args[2] === 2){\r\n        console.log(\"test\")\r\n        let flag = \"DE \" + args[0]\r\n        game.cub.removeCondition(args[0], target);\r\n        target.unsetFlag('world', flag)\r\n    }\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"eJu7luJizt0iXymV"}
{"_id":"fyoofWCI9kPl320Z","name":"Darkvision","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet dimVision = target.dimSight\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\n\r\n\r\nif (args[0] === \"on\") {\r\n    ActorSetFlag.execute(args[1], 'world', 'darkvisionSpell', dimVision)\r\n    ActorUpdate.execute(args[1],{ \"dimSight\" : 60 })\r\n}\r\nif(args[0] === \"off\") {\r\n    let sight = target.getFlag('world', 'darkvisionSpell');\r\n    ActorUpdate.execute(args[1],{ \"dimSight\" : sight });\r\n    ActorUnSetFlag.execute(args[1], 'world', 'darkvisionSpell')\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"g2NaZs3yeqwyRzCS","name":"Boots of Speed","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\nlet TokenSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet TokenUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet speed = parseInt(target.actor.data.data.attributes.speed.value);\r\n\r\nif (!target.getFlag('world', 'bootsOfSpeed')) {\r\n    let newSpeed = (speed * 2) + \"ft\";\r\n    ActorUpdate.execute(args[1], {\"data.attributes.speed.value\": newSpeed});\r\n    ActorSetFlag.execute(args[1], 'world', 'bootsOfSpeed', speed);\r\n} else {\r\n    let newSpeed = target.getFlag('world', 'bootsOfSpeed')\r\n    ActorUpdate.execute(args[1],{\"data.attributes.speed.value\": (newSpeed + \"ft\")});\r\n    ActorUnSetFlag.execute(args[1],'world', 'bootsOfSpeed');\r\n}\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"ActorUpdate","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"//args[0] = actor ID\r\n//args[1] = update data\r\n\r\nif(!args[0] || !args[1]) return ui.notifications.error(`${this.name}'s arguments are invalid.`);\r\n\r\n(async()=>{\r\n  await canvas.tokens.get(args[0]).actor.update(args[1]);\r\n})();","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"gZ22yWmRBsL6hHxi"}
{"_id":"h53SXiPj68gBkXsP","name":"Heroism","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"const hookIdFlag = target.actor.getFlag(\"world\", \"heroismUpdateCombatHookId\");\r\n\r\n\r\nif (args[0] === \"on\" && !hookIdFlag) {\r\n    const hookId = Hooks.on(\"updateCombat\", (combat, update) => {\r\n        if (!(\"round\" in update || \"turn\" in update)) return;\r\n        if (combat.combatant.tokenId === args[1]) {\r\n            ActorUpdate.execute(args[0],{ \"data.attributes.hp.temp\": mod });\r\n            ChatMessage.create({ content: \"Heroism continues on \" + target.name  })\r\n        }\r\n    });\r\n    ActorSetFlag.execute(args[0], \"world\", \"heroismUpdateCombatHookId\", hookId);\r\n\r\n}\r\nif (args[0] === \"off\" && hookIdFlag) {\r\n    Hooks.off(\"updateCombat\", hookIdFlag);\r\n    ActorUnSetFlag.execute(args[0], \"world\", \"heroismUpdateCombatHookId\");\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"j5rsbo3zh3LaPncq","name":"Alter Self","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let item = actor.items.find(i => i.name === `Unarmed Strike`);\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\n\r\nconsole.log(item)\r\nif (args[0] === \"on\") {\r\n    if (token) {\r\n        new Dialog({\r\n            title: \"Are you using Natural Weapons\",\r\n            content: \"<p>Yes or no</p>\",\r\n            buttons: {\r\n                one: {\r\n                    label: \"Yes\",\r\n                    callback: () => {\r\n                        if (!item){\r\n                            ChatMessage.create({content: \"No unarmed strike found\"})\r\n                            return;\r\n                        }\r\n                        let copy_item = duplicate(item);\r\n                        ActorSetFlag.execute(args[0],'world', 'AlterSelfSpell', item.data.data.damage.parts[0][0])\r\n                        copy_item.data.data.damage.parts[0][0] = \"1d6 +@mod\"\r\n                        actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n                    }\r\n                },\r\n                    two: {\r\n                        label: \"No\",\r\n                        callback: () => ChatMessage.create({ content: `Unarmed strike not altered` })\r\n                },\r\n            }\r\n        }).render(true);\r\n    }\r\n} \r\nif(args[0] === \"off\") {\r\n    let damage = target.actor.getFlag('world', 'Alter self')\r\n    let copy_item = duplicate(item);\r\n    copy_item.data.data.damage.parts[0][0] = damage\r\n    actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n    ActorUnSetFlag.execute(args[1],'world', 'AlterSelfSpell',);\r\n    ChatMessage.create({ content: `Alter Self expired, unarmed strike returned` })\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"False Life","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro           ","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"if (token) {\r\n    let increment = (args[1]-1)*5\r\n    let formula = `1d4 + 1`;\r\n    let amount = new Roll(formula).roll().total;\r\nChatMessage.create({content: \" False life healing healing is \" + amount + \"+ \" + increment })\r\n    let total= amount + increment\r\n    //Note: Just change the number after the comma to heal/receive other HP values. Negative numbers indicate damage.\r\n    token.actor.update({\"data.attributes.hp.temp\": total}) \r\n} else {\r\n    ui.notifications.notify(\"Please select a token.\");\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"kg3fCG3r92zw3z99"}
{"_id":"lMAmkU13CpJ9KUUG","name":"Ring of Invisibility","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet TokenUpdate = game.macros.getName(\"TokenUpdate\");\r\nlet hidden = target.data.hidden;\r\nlet visible = hidden ? false : true;\r\nTokenUpdate.execute(args[1],{\"hidden\": visible});\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"lefVX9mOaAfispDq","name":"ActorSetFlag","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"//args[0] = token ID\r\n//args[1]-[3] = update data\r\n\r\nif(!args[0] || !args[1]) return ui.notifications.error(`${this.name}'s arguments are invalid.`);\r\n\r\ncanvas.tokens.get(args[0]).actor.setFlag(args[1], args[2], args[3]);\r\n\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"mR5hGlqpWobrNxZg","name":"Ray of Frost","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet speed = parseInt(target.actor.data.data.attributes.speed.value);\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\n\r\n\r\nif (args[0] === \"on\") {\r\n    let newSpeed = speed - 10\r\n    ActorSetFlag.execute(args[1], 'world', 'rayOfFrost', speed)\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\" : (newSpeed + \" ft\") })\r\n    ChatMessage.create({content: target.name + \" has their speed decreased by 10ft\"})\r\n} else {\r\n    let newSpeed = target.actor.getFlag('world', 'rayOfFrost');\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\" : newSpeed });\r\n    ActorUnSetFlag.execute(args[1], 'world', 'rayOfFrost')\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"n0HgHhrA4YgmYpSK","name":"Shillelagh","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet weapons = target.actor.items.filter(i => i.data.type === `weapon`);\r\nlet weapon_content = ``;\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\n\r\n\r\nfor (let weapon of weapons) {\r\n    weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\r\n}\r\nif (args[0] === \"on\" && !target.getFlag('world', 'shillelagh')) {\r\n    let content = `\r\n<div class=\"form-group\">\r\n  <label>Weapons : </label>\r\n  <select name=\"weapons\">\r\n    ${weapon_content}\r\n  </select>\r\n</div>`;\r\n\r\n    new Dialog({\r\n        title: \"Choose a club or quarterstaff\",\r\n        content,\r\n        buttons:\r\n        {\r\n            Ok:\r\n            {\r\n                label: `Ok`,\r\n                callback: (html) => {\r\n                    console.log(html.find('[name=weapons]')[0].value);\r\n                    let itemId = html.find('[name=weapons]')[0].value;\r\n                    let item = actor.items.get(itemId);\r\n                    let copy_item = duplicate(item);\r\n                    ActorSetFlag.execute(args[1], `world`, `shillelagh`, itemId);\r\n                    copy_item.data.damage.parts[0][0] = \"1d8 +@mod\";\r\n                    copy_item.data.ability = \"wis\"\r\n                    target.actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n                    ChatMessage.create({content: copy_iten.name + \" is empowered\"})\r\n                }\r\n            },\r\n            Cancel:\r\n            {\r\n                label: `Cancel`\r\n            }\r\n        }\r\n    }).render(true);\r\n}\r\n\r\nif (args[0] === \"off\") {\r\n    let itemId = token.actor.getFlag(`world`, `shillelagh`);\r\n    let item = actor.items.get(itemId);\r\n    let copy_item = duplicate(item);\r\n    copy_item.data.damage.parts[0][0] = \"1d6 +@mod\";\r\n    copy_item.data.ability = \"\"\r\n    target.actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n    ActorUnSetFlag.execute(args[1], `world`, `shillelagh`);\r\n    ChatMessage.create({content: copy_iten.name + \" returns to normal\"})\r\n\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"n58MeMZDsU6wdk5E","name":"Invisibility ","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet TokenUpdate = game.macros.getName(\"TokenUpdate\");\r\nlet hidden = target.data.hidden\r\nif(args[0] === \"on\"){\r\nTokenUpdate.execute(args[1],{\"hidden\": true});\r\n} else {\r\n    TokenUpdate.execute(args[1],{\"hidden\": false});\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"TokenUpdate","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"//args[0] = token ID\r\n//args[1] = update data\r\n\r\nif(!args[0] || !args[1]) return ui.notifications.error(`${this.name}'s arguments are invalid.`);\r\n\r\ncanvas.tokens.get(args[0]).update(args[1]);","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"o5hi8GyaO6DgcApN"}
{"_id":"pTXAs73uCzRgp97J","name":"Barkskin","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet armour = target.actor.data.data.attributes.ac.value\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\n\r\nif (args[0] === \"on\") {\r\n    let newArmour = armour <= 16 ? 16 : armour\r\n    ActorSetFlag.execute(args[1],'world', 'barkskin', armour)\r\n    target.actor.update({ \"data.attributes.ac.value\" : newArmour })\r\n} else {\r\n    let newArmour = target.actor.getFlag('world', 'barkskin');\r\n    target.actor.update({ \"data.attributes.ac.value\" : newArmour });\r\n    ActorUnSetFlag.execute(args[1], 'world', 'barkskin')\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"qIWDOBHG9my7pIxK","name":"BlindDeaf","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nif (args[0] === \"on\") {\r\n    new Dialog({\r\n        title: \"Choose an Effect\",\r\n        buttons: {\r\n            one: {\r\n                label: \"Blindness\",\r\n                callback: () => {\r\n                    game.macros.getName(\"BlindExecute\").execute(\"Blinded\", args[1], 1 )\r\n                }\r\n            },\r\n            two: {\r\n                label: \"Deafness\",\r\n                callback: () => {\r\n                    game.macros.getName(\"BlindExecute\").execute(\"Deafened\", args[1], 1 )\r\n                }\r\n            }\r\n        },\r\n    }).render(true);\r\n}\r\nif(args[0] === \"off\"){\r\n    if (target.getFlag('world', 'DE Blinded')) {\r\n        game.macros.getName(\"BlindExecute\").execute(\"Blinded\", args[1], 2 )\r\n    } else if (target.getFlag('world', 'DE Deafened')) {\r\n        game.macros.getName(\"BlindExecute\").execute(\"Deafened\", args[1], 2 )\r\n    }\r\n}\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"SpellOff","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"\r\nlet Off= game.macros.getName(args[0]);\r\nOff.execute(\"off\", token.id);","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"rP2s0Uebrn3gkTy0"}
{"_id":"uZrGGtrtxUXZbYbe","name":"EnlargeReduce","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet originalSize = target.data.width;\r\nlet mwak = target.actor.data.data.bonuses.mwak.damage\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\nlet TokenUpdate = game.macros.getName(\"TokenUpdate\");\r\nlet TokenSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet TokenUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nif (args[0] === \"on\" && !target.getFlag('world', 'enlageReduceSpell')) {\r\n    if (target) {\r\n        new Dialog({\r\n            title: \"Enlarge or Reduce\",\r\n            buttons: {\r\n                one: {\r\n                    label: \"Enlarge\",\r\n                    callback: () => {\r\n                        let bonus = mwak + \" 1d4\";\r\n                        let enlarge = (originalSize + 1);\r\n                        ActorUpdate.execute(args[1],{\"data.bonuses.mwak.damage\" : bonus });\r\n                        TokenUpdate.execute(args[1],{\"width\": enlarge, \"height\": enlarge});\r\n                        TokenSetFlag.execute(args[1], 'world', 'enlageReduceSpell', originalSize)\r\n                        ChatMessage.create({content: target.name + \" is enlarged\"})\r\n                    }\r\n                },\r\n                    two: {\r\n                        label: \"Reduce\",\r\n                        callback: () => {\r\n                        let bonus = mwak +  \" -1d4\";\r\n                        let size = originalSize\r\n                        let newSize = (size > 1) ? (size -1) : (size - 0.3)\r\n                        ActorUpdate.execute(args[1],{\"data.bonuses.mwak.damage\" : bonus });\r\n                        TokenUpdate.execute(args[1],{\"width\": newSize, \"height\": newSize});\r\n                        TokenSetFlag.execute(args[1], 'world', 'enlageReduceSpell', originalSize)\r\n                        ChatMessage.create({content: target.name + \" is reduced\"})\r\n                        }\r\n                },\r\n            }\r\n        }).render(true);\r\n    }\r\n} else if(args[0] === \"off\" && target.getFlag('world', 'enlageReduceSpell')){\r\n    let newSize = target.getFlag('world', 'enlageReduceSpell')\r\n    ActorUpdate.execute(args[1],{\"data.bonuses.mwak.damage\" : mwak })\r\n    TokenUpdate.execute(args[1],{\"width\": newSize, \"height\": newSize});\r\n    TokenUnSetFlag.execute(args[1], 'world', 'enlageReduceSpell')\r\n    ChatMessage.create({content: target.name + \" is returned to normal size\"})\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"vzDHS2zuvGJZ30sU","name":"Banishment","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\n\r\nif (args[0] === \"on\") {\r\n    target.update({hidden : true});\r\n    ActorSetFlag.execute(args[1], 'world','banishment', 1);\r\n    ChatMessage.create({content: target.name + \"  was banished\"})\r\n    \r\n}\r\nif(args[0]=== \"off\") {\r\n target.update({hidden : false})\r\n ActorUnSetFlag.execute(args[1], 'world', 'banishment');\r\n ChatMessage.create({content: target.name + \"  returned\"})\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"x8eiKNDtJtdOAYtf","name":"ActorUnSetFlag","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":true}},"scope":"global","command":"//args[0] = token ID\r\n//args[1]-[3] = update data\r\n\r\nif(!args[0] || !args[1]) return ui.notifications.error(`${this.name}'s arguments are invalid.`);\r\n\r\ncanvas.tokens.get(args[0]).actor.unsetFlag(args[1], args[2]);\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"j5rsbo3zh3LaPncq","name":"Alter Self","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let item = actor.items.find(i => i.name === `Unarmed Strike`);\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\n\r\nconsole.log(item)\r\nif (args[0] === \"on\") {\r\n    if (token) {\r\n        new Dialog({\r\n            title: \"Are you using Natural Weapons\",\r\n            content: \"<p>Yes or no</p>\",\r\n            buttons: {\r\n                one: {\r\n                    label: \"Yes\",\r\n                    callback: () => {\r\n                        if (!item){\r\n                            ChatMessage.create({content: \"No unarmed strike found\"})\r\n                            return;\r\n                        }\r\n                        let copy_item = duplicate(item);\r\n                        ActorSetFlag.execute(args[1],'world', 'AlterSelfSpell', item.data.data.damage.parts[0][0])\r\n                        copy_item.data.data.damage.parts[0][0] = \"1d6 +@mod\"\r\n                        actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n                        ChatMessage.create({content: \"Unarmed strike is altered\"})\r\n                    }\r\n                },\r\n                    two: {\r\n                        label: \"No\",\r\n                        callback: () => ChatMessage.create({ content: `Unarmed strike not altered` })\r\n                },\r\n            }\r\n        }).render(true);\r\n    }\r\n} \r\nif(args[0] === \"off\") {\r\n    let damage = target.actor.getFlag('world', 'Alter self')\r\n    let copy_item = duplicate(item);\r\n    copy_item.data.data.damage.parts[0][0] = damage\r\n    actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n    ActorUnSetFlag.execute(args[1],'world', 'AlterSelfSpell',);\r\n    ChatMessage.create({ content: `Alter Self expired, unarmed strike returned` })\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"j5rsbo3zh3LaPncq","name":"Alter Self","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let item = actor.items.find(i => i.name === `Unarmed Strike`);\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\n\r\nconsole.log(item)\r\nif (args[0] === \"on\") {\r\n    if (token) {\r\n        new Dialog({\r\n            title: \"Are you using Natural Weapons\",\r\n            content: \"<p>Yes or no</p>\",\r\n            buttons: {\r\n                one: {\r\n                    label: \"Yes\",\r\n                    callback: () => {\r\n                        if (!item){\r\n                            ChatMessage.create({content: \"No unarmed strike found\"})\r\n                            return;\r\n                        }\r\n                        let copy_item = duplicate(item);\r\n                        ActorSetFlag.execute(args[1],'world', 'AlterSelfSpell', item.data.data.damage.parts[0][0])\r\n                        copy_item.data.data.damage.parts[0][0] = \"1d6 +@mod\"\r\n                        actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n                        ChatMessage.create({content: \"Unarmed strike is altered\"})\r\n                    }\r\n                },\r\n                    two: {\r\n                        label: \"No\",\r\n                        callback: () => ChatMessage.create({ content: `Unarmed strike not altered` })\r\n                },\r\n            }\r\n        }).render(true);\r\n    }\r\n} \r\nif(args[0] === \"off\") {\r\n    let damage = target.actor.getFlag('world', 'Alter self')\r\n    let copy_item = duplicate(item);\r\n    copy_item.data.data.damage.parts[0][0] = damage\r\n    actor.updateEmbeddedEntity(\"OwnedItem\", copy_item);\r\n    ActorUnSetFlag.execute(args[1],'world', 'AlterSelfSpell',);\r\n    ChatMessage.create({ content: `Alter Self expired, unarmed strike returned` })\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"pTXAs73uCzRgp97J","name":"Barkskin","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet armour = target.actor.data.data.attributes.ac.value\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\n\r\nif (args[0] === \"on\") {\r\n    let newArmour = armour <= 16 ? 16 : armour\r\n    ActorSetFlag.execute(args[1],'world', 'barkskin', armour)\r\n    target.actor.update({ \"data.attributes.ac.value\" : newArmour })\r\n    ChatMessage.create({content: target.name + \"'s AC is set to 16\"})\r\n    \r\n} else {\r\n    let newArmour = target.actor.getFlag('world', 'barkskin');\r\n    target.actor.update({ \"data.attributes.ac.value\" : newArmour });\r\n    ActorUnSetFlag.execute(args[1], 'world', 'barkskin')\r\n    ChatMessage.create({content: target.name + \"'s AC is returned\"})\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"fyoofWCI9kPl320Z","name":"Darkvision","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet dimVision = target.dimSight\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\n\r\n\r\nif (args[0] === \"on\") {\r\n    ActorSetFlag.execute(args[1], 'world', 'darkvisionSpell', dimVision)\r\n    ActorUpdate.execute(args[1],{ \"dimSight\" : 60 })\r\n    ChatMessage.Create({content: target.name + \"'s vision has been improve\"})\r\n}\r\nif(args[0] === \"off\") {\r\n    let sight = target.getFlag('world', 'darkvisionSpell');\r\n    ActorUpdate.execute(args[1],{ \"dimSight\" : sight });\r\n    ActorUnSetFlag.execute(args[1], 'world', 'darkvisionSpell')\r\n    ChatMessage.Create({content: target.name + \"'s vision has been improved\"})\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"fyoofWCI9kPl320Z","name":"Darkvision","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet dimVision = target.dimSight\r\nlet ActorSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet ActorUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\n\r\n\r\nif (args[0] === \"on\") {\r\n    ActorSetFlag.execute(args[1], 'world', 'darkvisionSpell', dimVision)\r\n    ActorUpdate.execute(args[1],{ \"dimSight\" : 60 })\r\n    ChatMessage.Create({content: target.name + \"'s vision has been improve\"})\r\n}\r\nif(args[0] === \"off\") {\r\n    let sight = target.getFlag('world', 'darkvisionSpell');\r\n    ActorUpdate.execute(args[1],{ \"dimSight\" : sight });\r\n    ActorUnSetFlag.execute(args[1], 'world', 'darkvisionSpell')\r\n    ChatMessage.Create({content: target.name + \"'s vision has been improved\"})\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"n58MeMZDsU6wdk5E","name":"Invisibility ","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet TokenUpdate = game.macros.getName(\"TokenUpdate\");\r\nlet hidden = target.data.hidden\r\nif(args[0] === \"on\"){\r\nTokenUpdate.execute(args[1],{\"hidden\": true});\r\nChatMessage.Create({content: target.name + \" is invisible\"})\r\n} else {\r\n    TokenUpdate.execute(args[1],{\"hidden\": false});\r\n    ChatMessage.Create({content: target.name + \" is no longer invisible\"})\r\n}","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"LnYog6K6tzzjiyZh","name":"Longstrider","permission":{"default":0,"SWj23mpjGzaSl512":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"let target = canvas.tokens.get(args[1]);\r\nlet ActorUpdate = game.macros.getName(\"ActorUpdate\");\r\nlet TokenSetFlag = game.macros.getName(\"ActorSetFlag\");\r\nlet TokenUnSetFlag = game.macros.getName(\"ActorUnSetFlag\");\r\nlet speed = parseInt(target.actor.data.data.attributes.speed.value);\r\n\r\nif (args[0] === \"on\" && !target.actor.getFlag('world', 'Longstrider')) {\r\n    let newSpeed = (speed + 10) + \"ft\";\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\": newSpeed });\r\n    TokenSetFlag.execute(args[1], 'world', 'Longstrider', speed);\r\n    ChatMessage.create({ content: target.name + \" has their speed increased by 10ft\" })\r\n} else if (args[0] === \"off\" ) {\r\n    let newSpeed = target.actor.getFlag('world', 'Longstrider')\r\n    ActorUpdate.execute(args[1], { \"data.attributes.speed.value\": (newSpeed + \"ft\") });\r\n    TokenUnSetFlag.execute(args[1], 'world', 'Longstrider');\r\n    ChatMessage.create({ content: target.name + \" has their speed returned to normal\" })\r\n}\r\n","author":"SWj23mpjGzaSl512","img":"icons/svg/dice-target.svg","actorIds":[]}
